!function t(i,s,h){function e(n,o){if(!s[n]){if(!i[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(a)return a(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var f=s[n]={exports:{}};i[n][0].call(f.exports,function(t){var s=i[n][1][t];return e(s?s:t)},f,f.exports,t,i,s,h)}return s[n].exports}for(var a="function"==typeof require&&require,n=0;n<h.length;n++)e(h[n]);return e}({1:[function(){!function(){function t(){function t(){if(k)h.fillStyle="#000",h.fillText("Click to resume",505,384),x=b();else{for(E=0;b()>x&&10>E;)y.update(o,p,g,l),x+=m,E++;y.c(h,o,l)}requestAnimationFrame(t)}var s=document.getElementById("mc"),h=s.getContext("2d");h.mozImageSmoothingEnabled=!1,h.webkitImageSmoothingEnabled=!1,h.msImageSmoothingEnabled=!1,h.imageSmoothingEnabled=!1,h.Fb=!1,h.Hb=!1,h.Gb=!1,h.Eb=!1;var o={width:s.width,height:s.height};this.state="LOADING",this.vb=new w([500,500]),this.f=new f,this.t=new i(this,o),this.h=[],this.h=this.h.concat(new e(200+u(0,20),251,0,"fg",2)),this.h=this.h.concat(new e(700+u(0,20),251,0,"fg",2)),this.h=this.h.concat(new e(100,367,3,"wd",0)),this.h=this.h.concat(new e(200+u(0,20),575,1,"eg",1)),this.h=this.h.concat(new e(800+u(0,20),575,1,"eg",1)),this.h=this.h.concat(new e(-50,705,2,"ig",1)),this.r=[];var l=[],l=l.concat(new a(10,150,10,450,"wd ww fg fb eg ro".split(" "))),l=l.concat(new a(1e3,150,10,450,"wd ww fg fb eg ro".split(" "))),l=l.concat(new a(345,150,10,130,["fg"])),l=l.concat(new a(672,150,10,130,["fg"])),l=l.concat(new a(500,450,10,130,["eg"])),l=l.concat(new a(595,450,10,130,["eg"])),l=l.concat(new a(-80,600,10,130,["ig"])),l=l.concat(new a(1080,600,10,130,["ig"]));this.Ga=0,v=new r,v.add("pickup",2,[[0,,.01,.4394,.3103,.8765,,,,,,.3614,.5278,,,,,,1,,,,,.5]]),v.add("jump",1,[[0,,.1625,,.159,.2246,,,,,,,,.0471,,,,,1,,,.1,,.29]]),v.add("pewpew",3,[[2,,.2742,.0215,.0863,.6068,.2,-.196,,,,,,.5091,-.515,,,,1,,,,,.29]]),v.add("cheep",4,[[2,.1602,.01,.4203,.6306,.5952,,-.129,.04,.19,.75,.5614,.06,-.7285,.9046,-.595,.9816,-.5187,.9028,.6024,.6813,.521,-.0292,.5]]),this.s=[],this.s=this.s.concat(this.t),this.s=this.s.concat(new n(this,o));var p=[];this.A=[];var g=[],g=g.concat(new c(-60,742,1084,20,{})),p=p.concat(new c(-30,730,1054,48,{})),p=p.concat(new c(-30,580,533,4,{bottom:!0})),p=p.concat(new c(600,580,500,4,{bottom:!0})),p=p.concat(new c(-30,430,1054,4,{bottom:!0})),p=p.concat(new c(-30,280,372,4,{bottom:!0})),p=p.concat(new c(402,280,220,4,{bottom:!0})),p=p.concat(new c(682,280,382,4,{bottom:!0})),p=p.concat(new c(0,130,1024,4,{})),p=p.concat(new c(64,680,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(32,630,32,5,{left:!0,right:!1,bottom:!0})),p=p.concat(new c(0,584,32,5,{bottom:!1})),p=p.concat(new c(928,680,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(960,630,32,5,{left:!1,right:!0,bottom:!0})),p=p.concat(new c(992,584,32,5,{bottom:!1})),p=p.concat(new c(64,530,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(32,480,32,5,{left:!0,right:!1,bottom:!0})),p=p.concat(new c(0,434,32,5,{bottom:!1})),p=p.concat(new c(928,530,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(960,480,32,5,{left:!1,right:!0,bottom:!0})),p=p.concat(new c(992,434,32,5,{bottom:!1})),p=p.concat(new c(64,380,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(32,330,32,5,{left:!0,right:!1,bottom:!0})),p=p.concat(new c(0,284,32,5,{bottom:!1})),p=p.concat(new c(928,380,32,5,{left:!0,right:!0,bottom:!0})),p=p.concat(new c(960,330,32,5,{left:!1,right:!0,bottom:!0})),p=p.concat(new c(992,284,32,5,{bottom:!1}));for(this.pa=[],s=100;900>s;s+=33)this.pa.push(new c(s,720,32,3,{}));this.s=this.s.concat(p);var y=this;this.ib(),this.Sa=new d(12,30,[{a:0,b:72}]),this.Ta=new d(12,30,[{a:12,b:72}]),this.Ua=new d(12,30,[{a:48,b:72}]),this.Da=new d(24,14,[{a:97,b:58}]),this.cb=new d(7,3,[{a:83,b:62}]),this.eb=new d(7,3,[{a:90,b:62}]),this.va=new d(60,4,[{a:32,b:67}]),this.wb=new d(7,8,[{a:29,b:94}]),this.xb=new d(6,8,[{a:36,b:94}]),this.hb=new d(24,21,[{a:24,b:72}]),this.R=new d(50,25,[{a:121,b:46}]),this.ea=new d(14,8,[{a:0,b:8,duration:500},{a:14,b:8,duration:500}]),this.Cb=new d(14,8,[{a:8,b:16}]),this.D=new d(4,8,[{a:0,b:16}]),this.nb=new d(4,8,[{a:4,b:16}]),this.lb=new d(7,8,[{a:0,b:32}]),this.gb=new d(7,8,[{a:0,b:0,duration:400}]),this.Fa=new d(7,8,[{a:81,b:34},{a:89,b:34},{a:83,b:53}]),this.na=new d(13,6,[{a:97,b:52},{a:97,b:49}]),this.ab=new d(13,13,[{a:97,b:45}]),this.J=0;var m=1e3/60,x=b(),E=0;t()}function i(t,i){this.G=t,this.height=54,this.width=30,this.x=i.width/2,this.y=i.height-50,this.f=new f,this.speed=3,this.i=this.e=0,this.B=.9,this.q=!1,this.C=!0,this.F=!1,this.fb=.3,this.d=this.ma=!1,this.ca=new d(15,27,[{a:60,b:72}]),this.Q=new d(15,27,[{a:60,b:72,duration:100},{a:129,b:72,duration:100}]),this.tb=new d(24,27,[{a:118,b:0}]),this.ub=new d(20,29,[{a:142,b:0,duration:50}]),this.state="w"}function s(t,i,s,e,a,n,o){return t=new h(t,i,s,e,a,n,o),y.r=y.r.concat(t),t}function h(t,i,s,h,e,a,n){switch(this.width=32,this.height=64,this.x=t,this.y=i,this.type=s,this.H=1e3,this.d=h||!1,this.bb=e||!1,this.jb=a||!1,this.kb=n||!1,this.sb=b(),this.g=!1,this.i=this.e=0,this.speed=1,this.B=.9,this.I=null,this.U=0,this.V=5,this.ka=this.ja=-1,this.O={},this.Z=!1,this.type){case 1:this.H=3500,this.y=this.y-this.height-1,this.speed=3,this.I=new d(16,32,[{a:0,b:40,duration:100},{a:15,b:40,duration:100}]);break;case 5:case 2:this.H=3500,this.speed=4,this.I=new d(7,7,[{a:81,b:34}]),this.y-=18;break;case 3:this.speed=2;case 6:this.H=2e3,this.speed=4,this.I=new d(8,7,[{a:88,b:34}]),this.y-=18;break;case 4:this.H=0,this.speed=1,this.I=new d(12,29,[{a:171,b:0}]),this.y-=30,this.width=24,this.O={bottom:!1,left:!1,right:!1};break;case 7:this.H=3500,this.speed=5,this.I=new d(7,7,[{a:83,b:53}]),this.y-=18}}function e(t,i,s,h,e){switch(this.width=32,this.height=64,this.x=t,this.y=i,this.type=s,this.o=b(),this.now=null,this.d=.5>Math.random(),this.g=!1,this.P=null,this.Wa=h,this.speed=e||2,this.ta=null,this.state="w",this.j=this.Ka=this.k=this.l=null,this.p=new w([800,800,200]),this.type){case 0:this.l=new d(12,15,[{a:33,b:33,duration:200},{a:45,b:33,duration:200}]),this.k=new d(12,15,[{a:57,b:33,duration:50},{a:69,b:33,duration:50}]),this.height=30;break;case 1:for(this.l=new d(18,3,[{a:62,b:49,duration:500},{a:80,b:49,duration:500}]),this.speed=1,this.k=new d(18,13,[{a:133,b:32,duration:400}]),t=0;7>t;t++)this.k.frames.push({a:97,b:32,duration:200}),this.k.frames.push({a:151,b:32,duration:200});this.k.frames.push({a:133,b:32,duration:400}),this.k.frames.push({a:133,b:32,duration:100}),this.Ka=new d(18,13,[{a:115,b:32,duration:100}]),this.height=6,this.width=35,this.p=new w([600,800,4e3,400]),this.p.w=u(0,3);break;case 2:this.l=new d(13,12,[{a:31,b:53,duration:200},{a:44,b:53,duration:200}]),this.k=new d(13,12,[{a:57,b:53,duration:200},{a:70,b:53,duration:200}]),this.height=24,this.width=26;break;case 3:console.log("here"),this.ia=this.X=!1,this.M=0,this.oa=[[0,10],[2,20],[2,20],[2,20],[1,20],[0,20],[0,20],[0,20],[-1,20],[-2,20],[-2,20],[-2,20]],this.l=new d(16,32,[{a:42,b:0},{a:58,b:0},{a:74,b:0},{a:90,b:0}])}}function a(t,i,s,h,e){this.width=s,this.height=h,this.x=t,this.y=i,this.Va=e||[]}function n(t,i){this.G=t,this.width=36,this.height=52,this.x=i.width/2,this.y=77,this.speed=3,this.e=0,this.B=.6,this.S=this.d=!1,this.v=0,this.qa=10,this.ca=new d(18,26,[{a:75,b:73,duration:200},{a:93,b:73,duration:200}]),this.Q=new d(18,26,[{a:75,b:73,duration:200},{a:111,b:73,duration:200}])}function o(t,i){this.height=this.width=14,this.x=t,this.y=i,this.e=0,this.i=u(1,2)/2,this.B=.7,this.toggle=.5>Math.random(),this.v=0,this.Ja=u(20,60),this.g=this.T=!1,this.Ma=new d(7,8,[{a:0,b:0,duration:400},{a:21,b:0,duration:400}]),this.La=new d(7,8,[{a:0,b:0,duration:400},{a:7,b:0,duration:400},{a:14,b:0,duration:400}])}function c(t,i,s,h,e){this.width=s,this.height=h,this.x=t,this.y=i,this.O={bottom:e.bottom||!1,left:e.left||!1,right:e.right||!1},this.$=!0}function r(){this.ba={},this.aa=!0}function f(){var t={};window.addEventListener("keydown",function(i){t[i.keyCode]=!0}),window.addEventListener("keyup",function(i){t[i.keyCode]=!1}),this.n=function(i){return!0===t[i]},this.fa=function(i){for(var s=Object.keys(t),h=0;h<s.length;h++)if(!0===t[s[h]])if(i){if(A.N())return A.reset(),!0}else if(D.N())return D.reset(),!0;return!1},this.m={ya:37,za:39,Ba:38,Oa:40,Aa:32,Ca:90,Ra:88,Na:67,Pa:77,Qa:80}}function d(t,i,s){this.width=t,this.height=i,this.frame=0,this.frames=s,this.wa=b()}function w(t){this.timestamp=b(),this.la=t||[],this.w=0}function l(t,i){var s=t.x+t.width/2-(i.x+i.width/2),h=t.y+t.height/2-(i.y+i.height/2),e=t.width/2+i.width/2,a=t.height/2+i.height/2,n=null;return Math.abs(s)<e&&Math.abs(h)<a&&(e-=Math.abs(s),a-=Math.abs(h),e>=a?h>0?(t.F=!1,n="t",i.O.bottom?n=null:t.y+=a):i.O.bottom&&t.F?n=null:(n="b",t.y-=a):s>0?i.O.right?n=null:(n="l",t.x+=e):i.O.left?n=null:(n="r",t.x-=e)),n}function u(t,i){return Math.floor(Math.random()*(i-t+1))+t}function b(){return Date.now()}function p(t,i){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.height+t.y>i.y?!0:!1}var g,y=null,m=[],x=!1,k=!1,v=null,E=0,S=0,j=0,T=1*new Date,I=document.getElementById("fps");setInterval(function(){I.innerHTML=j.toFixed(1)+" fps"},1e3),w.prototype={start:function(){this.timestamp=b()},check:function(){b()-this.timestamp>this.la[this.w]&&this.next()},next:function(){this.start(),this.w++,this.w>=this.la.length&&(this.w=0)},W:function(){return this.check(),this.w},N:function(){return b()-this.timestamp>this.la[this.w]?!0:!1},reset:function(){this.timestamp=b(),this.w=0}};var D=new w([200]),M=new w([200]),A=new w([2e3]);d.prototype={c:function(t,i,s,h){this.frame>=this.frames.length&&(this.frame=0),h?(t.save(),t.translate(t.canvas.width,0),t.scale(-1,1),t.drawImage(m[0],this.frames[this.frame].a,this.frames[this.frame].b,this.width,this.height,t.canvas.width-i-2*this.width,s,2*this.width,2*this.height),t.restore()):t.drawImage(m[0],this.frames[this.frame].a,this.frames[this.frame].b,this.width,this.height,i,s,2*this.width,2*this.height)},update:function(){var t=b();this.frames[this.frame].duration&&t-this.wa>this.frames[this.frame].duration&&(this.wa=t,this.mb())},u:function(t){this.frame=t},mb:function(){this.frame++,this.frame>=this.frames.length&&(this.frame=0)},reset:function(){this.frame=0,this.wa=b()}},r.prototype={add:function(t,i,s){this.ba[t]=[],s.forEach(function(s,h){this.ba[t].push({da:0,count:i,Ha:[]});for(var e=0;i>e;e++){var a=new Audio;a.src=jsfxr(s),this.ba[t][h].Ha.push(a)}},this)},play:function(t){this.aa||(t=this.ba[t],t=1<t.length?t[Math.floor(Math.random()*t.length)]:t[0],t.Ha[t.da].play(),t.da<t.count-1?t.da++:t.da=0)}},c.prototype={update:function(){},c:function(){}},o.prototype={update:function(t,i,s){if(this.T||this.g)this.Ma.update(),(5>this.x||this.x>t.width-5)&&(this.T=this.g=!0);else{this.e=this.toggle?this.e+1:this.e-1,this.v++,this.v>this.Ja&&(this.toggle=!this.toggle,this.v=0,this.Ja=u(40,60)),this.e*=this.B,this.x+=this.e,this.y+=this.i;for(var h=0;h<i.length;h++)p(this,i[h])&&(5>this.x||this.x>t.width-5?this.g=!0:this.T||this.g||E++,this.T=!0);this.La.update()}!this.g&&p(this,s)&&(this.g=!0,v.play("pickup"),S++,S>31&&(A.reset(),y.state="END"),this.T&&E--)},c:function(t){this.T?this.Ma.c(t,this.x,this.y):this.La.c(t,this.x,this.y,0>this.e)}},n.prototype={update:function(t){this.S||(this.d?this.e>-this.speed&&this.e--:this.e<this.speed&&this.e++,this.e*=this.B,this.x+=this.e,this.x>t.width-100&&(this.d=!0,this.e=0),100>this.x&&(this.d=!1,this.e=0)),!this.S&&0>this.qa&&100<u(1,1e3)&&(this.S=!0,this.v=u(100,200),this.qa=40,this.G.A=this.G.A.concat(new o(this.x,this.y)),this.ca.update()),0<this.v&&this.S?(this.v--,this.ca.update(),0>=this.v&&(this.S=!1,this.Q.u(0))):(this.qa--,this.Q.update())},c:function(t){this.S?this.ca.c(t,this.x,this.y,!this.d):this.Q.c(t,this.x,this.y,!this.d)}},a.prototype={Ea:function(t){return-1<this.Va.indexOf(t.toLowerCase())?!0:!1}},e.prototype={update:function(t,i,h,e){for(var a=0;a<t.length;a++)if(p(this,t[a])&&t[a].Ea(this.Wa)&&this.P!==t[a]){if(this.d=!this.d,this.P=t[a],2===this.type)switch(this.state){case"hb":this.state="pb",this.speed=1,this.j=s(this.d?this.x-25:this.x+this.width+1,this.y-4,4,this.d,!1,!1,!1);break;case"pb":case"dj":null===this.j||this.j.g||(this.j.g=!0,this.j=null),this.state="w",this.speed=1;break;case"t":this.x=this.d?-60:1030,this.state="w",this.speed=1}break}switch(this.type){case 0:this.Ab(t,i,h);break;case 1:this.zb(t,i,h);break;case 2:this.Bb(t,i,h,e);break;case 3:this.yb(t,i,h)}},yb:function(t,i,s){switch(this.ua(["6"],["2","3","5","6","7"],s)&&(this.state="d"),this.now=b(),this.state){case"d":this.y+=3,1e3<this.y&&this.reset();break;case"w":if(this.l.u(0),!this.g){if(this.now-this.o>this.oa[this.M][1])for(this.x=this.d?this.x-2:this.x+2,this.y-=this.oa[this.M][0],this.M++,this.M>=this.oa.length&&(this.M=0,this.L++,this.ia&&(this.d=!this.d,this.ia=!1),this.Y(i,800)&&(this.state="l",this.L=0,this.o=this.now)),this.o=this.now,i=0;i<t.length;i++)p(this,t[i])&&t[i].Ea("wd")&&this.P!==t[i]&&(this.P=t[i],this.ia=!0);13<this.L&&(this.state="s",this.o=this.now)}break;case"s":this.Y(i,800)?(this.state="l",this.L=0,this.o=this.now):1300<this.now-this.o?(this.o=this.now,this.state="w",this.L=0,this.X=!1):900<this.now-this.o?this.l.u(1):300<this.now-this.o&&this.l.u(0);break;case"l":this.l.u(2),500<this.now-this.o&&(this.state="a",this.o=this.now,this.X=!1);break;case"a":this.X||(v.play("cheep"),this.ga(),this.X=!0,this.l.u(3)),1e3<this.now-this.o&&(this.o=this.now,this.state="w",this.L=11,this.X=!1)}},Ab:function(t,i,s){switch(this.ua(["7"],["2","3","5","6","7"],s)&&(this.state="d"),this.state){case"d":this.y+=3,1e3<this.y&&this.reset();break;case"w":switch(this.xa(),this.l.update(),this.p.W()){case 1:case 2:this.Y(i,100)&&(this.state="a",this.p.reset())}break;case"a":switch(this.k.update(),this.p.W()){case 1:this.ga(),this.state="w",this.p.reset()}}},ua:function(t,i,s){for(var h=0;h<s.length;h++)if(!s[h].g&&p(this,s[h])&&(-1<i.indexOf(""+s[h].type)&&(s[h].g=!0),-1<t.indexOf(""+s[h].type)))return!0;return!1},Bb:function(t,i,s,h){switch(this.xa(),this.l.update(),this.k.update(),this.ua(["5"],["2","3","5","6","7"],s)&&(this.state="d"),this.state){case"d":this.y+=3,1e3<this.y&&this.reset();break;case"w":for(i=!1,p(this,h[12])&&h[12].$&&(i=!0),t=0;t<s.length;t++)s[t].g||4!==s[t].type||p(this,s[t])&&(i=!0);i&&(this.state="hb",this.speed=4,this.d=!this.d,this.P=null,this.ta=12,h[12].$=!1,150>this.x||840<this.x)&&(this.state="t");break;case"pb":i=!1,(null===this.j||this.j.g)&&(i=!0);var e=["2","3","5","6","7"];if(!i){for(t=0;t<s.length;t++)s[t].g||4===s[t].type&&this.j!==s[t]&&p(this.j,s[t])&&(i=!0),-1<e.indexOf(""+s[t].type)&&p(this.j,s[t])&&(s[t].g=!0,5===s[t].type&&(this.j.g=!0,this.j.Z&&(h[12].$=!0)));for(s=0;s<h.length;s++)p(this,h[s])&&s===this.ta&&(i=this.j.Z=!0)}i&&(this.state="dj",this.speed=4,this.ta=null,this.d=!this.d,this.j=this.P=null)}},zb:function(t,i){switch(this.xa(),this.state){case"w":this.l.update(),2<this.p.W()&&(this.state="up",this.height=26,this.y-=19,this.k.reset());break;case"up":this.k.update(),0<this.k.frame&&16>this.k.frame&&this.Y(i,80)&&(this.state="a",this.p.reset()),15<this.k.frame&&(this.state="w",this.y+=19,this.height=6,this.p.reset());break;case"a":1===this.p.W()&&(s(this.d?this.x-5:this.x+this.width-5,this.y+this.height,3,this.d,!0,!0,!1),this.state="up",this.p.reset())}},xa:function(){this.g||(this.now=b(),10<this.now-this.o&&(this.x=this.d?this.x-this.speed:this.x+this.speed,this.o=this.now,2!==this.type||"pb"!==this.state||null===this.j||this.j.g||this.j.push(this.d)))},reset:function(){switch(this.state="w",this.g=!1,this.type){case 3:this.x=200,this.y=367,this.M=this.L=0;break;case 2:this.x=-50,this.y=705;break;case 0:this.y=251}},c:function(t){switch(this.type){case 0:this.Za(t);break;case 1:this.Ya(t);break;case 2:this.$a(t);break;case 3:this.Xa(t)}},Xa:function(t){this.l.c(t,this.x,this.y,!this.d)},Za:function(t){switch(this.state){case"d":case"w":this.l.c(t,this.x,this.y,!this.d);break;case"a":this.k.c(t,this.x,this.y,!this.d)}},$a:function(t){switch(this.state){case"t":case"w":case"d":this.l.c(t,this.x,this.y,!this.d);break;case"hb":case"pb":case"dj":this.k.c(t,this.x,this.y,!this.d)}},Ya:function(t){switch(this.state){case"w":this.l.c(t,this.x,this.y,!this.d);break;case"up":this.k.c(t,this.x,this.y,!this.d);break;case"a":this.Ka.c(t,this.x,this.y,!this.d)}},Y:function(t,i){if(this.d){if(p(t,{x:this.x-i,y:this.y+this.height/2,width:i,height:2}))return!0}else if(p(t,{x:this.x,y:this.y+this.height/2,width:i,height:2}))return!0;return!1},ga:function(){switch(this.type){case 0:s(this.d?this.x-this.width-5:this.x+this.width+5,this.y+this.height,2,this.d,!0,!0,!1),s(this.d?this.x-this.width-5:this.x+this.width+5,this.y+this.height,2,this.d,!0,!0,!0),s(this.d?this.x-this.width-5:this.x+this.width+5,this.y+this.height,2,this.d,!1,!0,!0);break;case 3:s(this.d?this.x-this.width-10:this.x+this.width+10,this.y+this.height,1,this.d,!1,!0,!1)}}},h.prototype={update:function(t){if(0<this.H&&b()-this.sb>this.H&&(this.g=!0,this.Z&&(this.Z=!1,icebases[12].$=!0)),this.jb&&(this.d?this.e>-this.speed&&this.e--:this.e<this.speed&&this.e++),this.kb&&(this.bb?this.i>-this.speed&&this.i--:this.i<this.speed&&this.i++),this.e*=this.B,this.i*=this.B,this.x+=this.e,this.y+=this.i,this.I.update(),!this.g){switch(this.type){case 1:p(t,this)&&(t.ma=!0,t.x=this.x+this.U,t.y=this.y-15+this.V,t.q=!0),this.U+=this.ja,this.V+=this.ka,(-8>this.U||8<this.U)&&(this.ja*=-1),(-20>this.V||5<this.V)&&(this.ka*=-1)}4!==this.type&&(-5>this.x||1028<this.x||-5>this.y||800<this.y)&&(this.g=!0)}},c:function(t){this.I.c(t,this.x,this.y,this.d)},push:function(t){this.x=t?this.x-this.speed:this.x+this.speed}},i.prototype={update:function(t,i,h,e){switch(this.state){case"w":for(this.ma&&(this.f.n(this.f.m.ya)||this.f.n(this.f.m.za))&&(this.f.n(this.f.m.Ba)||this.f.n(this.f.m.Aa)||this.f.n(this.f.m.Ca))?this.ma=!1:(this.f.n(this.f.m.ya)&&(this.e>-this.speed&&this.e--,this.d=!0),this.f.n(this.f.m.za)&&(this.e<this.speed&&this.e++,this.d=!1),(this.f.n(this.f.m.Ba)||this.f.n(this.f.m.Aa)||this.f.n(this.f.m.Ca))&&!this.q&&this.C&&(this.q=!0,this.F=this.C=!1,this.i=2*-this.speed,v.play("jump")),this.f.n(this.f.m.Oa)&&!this.q&&this.C&&(this.q=this.C=!1,this.F=!0,this.i=2*this.speed),this.f.n(this.f.m.Ra)&&M.N()&&(this.G.J++,2<this.G.J&&(this.G.J=0),M.reset()),this.f.n(this.f.m.Na)&&M.N()&&(this.ga=!0,s(this.d?this.x-6:this.x+this.width-6,this.y+45,5+this.G.J,this.d,!1,!0,!1),M.reset())),this.f.n(this.f.m.Pa)&&D.N()&&(v.aa=!v.aa,D.reset()),this.e*=this.B,this.i+=this.fb,this.C=!1,h=0;h<i.length;h++){var a=l(this,i[h]);"l"===a||"r"===a?(this.e=0,this.q=!1):"b"===a?(this.C=!0,this.F=this.q=!1):"t"===a&&(this.i*=-1)}for(h=0;h<e.length;h++)e[h].g||4!==e[h].type||(a=l(this,e[h]),"l"===a||"r"===a?(this.e=0,this.q=!1):"b"===a?(this.C=!0,this.F=this.q=!1):"t"===a&&(this.i*=-1));this.C&&(this.i=0),this.x+=this.e,this.y+=this.i,this.x<-(this.width-2)?this.x=t.width-3:this.x>t.width-2&&(this.x=-1*(this.width-3)),(.1<this.e||-.1>this.e)&&!this.q&&this.Q.update();break;case"d":this.y+=3,1e3<this.y&&(A.reset(),y.state="DIE")}},c:function(t){switch(this.state){case"w":this.q||this.F?this.ub.c(t,this.x,this.y,!this.d):this.Q.c(t,this.x,this.y,!this.d);break;case"d":this.tb.c(t,this.x,this.y,!this.d)}}},t.prototype={update:function(t,i,s,h){switch(this.state){case"TITLE":this.f.fa()&&(this.state="STORY",x=!1);break;case"STORY":this.f.fa()&&(this.state="GAME",x=!1);break;case"END":case"DIE":this.f.fa(!0)&&(this.state="TITLE",x=!1);break;case"GAME":if(!x){for(var e=0,e=0;e<this.s.length;e++)this.s[e].update(t,i,this.Db,this.r);for(e=0;e<this.h.length;e++)this.h[e].g||(this.h[e].update(h,this.t,this.r,this.pa),p(this.t,this.h[e])&&(this.t.state="d"));for(e=0;e<this.A.length;e++)this.A[e].update(t,s,this.t);for(E>0&&(t=b(),500<t-this.Ga&&(v.play("pewpew"),this.Ga=t)),e=0;e<this.r.length;e++)this.r[e].g||this.r[e].update(this.t,this.pa);this.ea.update()}this.f.n(this.f.m.Qa)&&M.N()&&(x=!x,M.reset())}},c:function(t,i){switch(t.clearRect(0,0,i.width,i.height),this.state){case"LOADING":this.pb(t,i);break;case"TITLE":this.sa(t),this.rb(t,i),this.ea.update();break;case"STORY":this.sa(t),this.qb(t,i),this.ea.update();break;case"END":this.Ia(t,i,"You Did it! Congratulations!");break;case"DIE":this.Ia(t,i,"Game Over!");break;case"GAME":this.sa(t),this.ra(t);for(var s=0,s=0;s<this.s.length;s++)this.s[s].c(t);for(s=0;s<this.h.length;s++)this.h[s].g||this.h[s].c(t);for(s=0;s<this.A.length;s++)this.A[s].g||this.A[s].c(t);for(s=0;s<this.r.length;s++)this.r[s].g||this.r[s].c(t);this.ob(t,this.t),x&&(t.fillStyle="#000",t.font="30pt monospace",t.textAlign="center",t.fillText("PAUSED",i.width/2,i.height/2)),s=1e3/((g=new Date)-T),g!==T&&(j+=(s-j)/50,T=g)}},Ia:function(t,i,s){for(t.fillStyle="#000",t.fillRect(0,0,i.width,i.height),t.fillStyle="#fff",t.font="30pt monospace",t.textAlign="center",t.fillText(s,i.width/2,i.height/2),this.ha(t,512,600,!0),S=y.J=E=0,y.A=[],y.r=[],y.t.x=512,y.t.y=700,y.t.state="w",t=0;t<y.h.length;t++)y.h[t].reset()},sa:function(t){for(var i=0,i=0;1024>i;i+=94)this.Da.c(t,i,482),this.Da.c(t,i+48,482,!0);for(var s=0,i=0;1024>i;i+=24)this.Sa.c(t,i,510),0===i%96&&(this.Ta.c(t,i,510),s=0),600===i&&(this.Ua.c(t,i,510),s=0),s++;for(t.fillStyle="#11b76d",t.fillRect(0,570,1024,80),t.fillStyle="#148875",t.fillRect(0,650,1024,40),t.fillStyle="#155c6f",t.fillRect(0,690,1024,100),i=0;1024>i;i+=15)this.cb.c(t,i,645);for(i=0;1024>i;i+=15)this.eb.c(t,i,685);for(i=0;768>i;i+=8)this.va.c(t,150,i),this.va.c(t,450,i),this.va.c(t,750,i);for(i=0;3>i;i++)this.wb.c(t,138+300*i,713),this.xb.c(t,268+300*i,713);for(i=0;1024>i;i+=48)this.hb.c(t,i,0)},ra:function(t){for(var i=0,i=0;1024>i;i+=8)this.D.c(t,i,729),this.nb.c(t,i,745);for(i=0;500>i;i+=8)this.D.c(t,i,580);for(i=600;1024>i;i+=8)this.D.c(t,i,580);for(i=0;1024>i;i+=8)this.D.c(t,i,430);for(i=0;340>i;i+=8)this.D.c(t,i,279);for(i=400;620>i;i+=8)this.D.c(t,i,279);for(i=680;1024>i;i+=8)this.D.c(t,i,279);for(i=0;1024>i;i+=8)this.D.c(t,i,129);for(this.K(t,0,280,!1),this.K(t,0,430,!1),this.K(t,0,580,!1),this.K(t,924,280,!0),this.K(t,924,430,!0),this.K(t,924,580,!0),i=0;1024>i;i+=28)this.ea.c(t,i,740),this.Cb.c(t,i,756)},K:function(t,i,s,h){h?(this.R.c(t,i,s+100,h),this.R.c(t,i+32,s+50,h),this.R.c(t,i+64,s,h)):(this.R.c(t,i,s+100,h),this.R.c(t,i-32,s+50,h),this.R.c(t,i-64,s,h))},ob:function(t){v.aa&&this.lb.c(t,1e3,50),t.fillStyle="red",t.fillRect(18,168,20,-4*S),this.gb.c(t,20,20),this.na.u(1);for(var i=0;11>i;i++)this.na.c(t,14,40+12*i),9==i&&this.na.u(0);for(this.ab.c(t,50,45+25*this.J),i=0;3>i;i++)this.Fa.u(i),this.Fa.c(t,55,50+25*i)},pb:function(t,i){t.fillStyle="#000",t.fillRect(0,0,i.width,i.height),t.fillStyle="white",t.font="20pt monospace",t.textAlign="center",t.fillText("Loading...",i.width/2,i.height/2)},qb:function(t,i){this.ra(t),t.fillStyle="rgba(0, 0, 0, 0.80)",t.fillRect(0,0,i.width,i.height);var s=i.width/2;t.fillStyle="white",t.font="12pt monospace";for(var h="Oh no!;Felicity's boyfriend is losing his love!;Brave the four elements and collect the hearts before they break.;Fill the heartmeter to complete the level.;Watch out for windducks, firesprites, sandmonsters and snowmen.;Use the correct element to defeat them.;;Controls:;Arrow keys: Move left/right, Jump, Go down stairs;Z: Jump;X: Switch Element;C: Use Element;;M: Mute sounds;P: Pause".split(";"),e=0;e<h.length;e++)t.fillText(h[e],s,100+40*e);this.ha(t,s,720)},ha:function(t,i,s,h){switch(this.vb.W()){case 0:t.fillStyle="white",t.font="15pt impact",h?t.fillText("Press any key to try again",i,s):t.fillText("Press any key to begin",i,s)}},rb:function(t,i){this.ra(t),t.fillStyle="rgba(255, 255, 255, 0.10)",t.fillRect(0,0,i.width,i.height),t.fillStyle="yellow",t.font="60pt impact",t.textAlign="center";for(var s=["Felicity","and","the Fifth Element:","Love"],h=0;h<s.length;h++)t.fillText(s[h],512,200+100*h);this.ha(t,512,630)},ib:function(){var t=this,i=new Image;i.onload=function(){t.state="TITLE"},i.src="spritesheet.png",m[0]=i}},window.addEventListener("load",function(){y=new t}),window.onblur=function(){k=!0},window.onfocus=function(){k=!1}}()},{}]},{},[1]);