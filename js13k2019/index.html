<style>body{margin:0;padding:0}#c{margin:0;padding:0;background:#f5edba}</style><canvas id=c width=1360 height=760></canvas><script>!function(){const t=[1360,70,"h,0,2,1360,70,10",1076,70,"h,0,2,1076,70,10",256,420,"h,84,0,38,36,3h,0,16,256,402,15",1360,768,"h,584,464,506,270,10h,1026,454,76,142,3h,998,576,122,154,3h,1314,480,88,186,3h,1296,648,88,82,3r,10,20,0k,1i,1122,716,12r,0",275,230,"h,0,0,272,230,15",310,150,"h,0,0,310,146,15",1360,768,"k,4b,166,0,100,760b,440,0,98,760b,840,0,98,760b,1104,0,98,760b,238,394,92,40b,370,232,100,44b,516,136,88,40b,114,180,72,46b,780,198,100,46b,914,444,90,40b,1054,140,98,44b,1174,370,88,38i,1058,162,22i,370,254,22i,114,202,22i,602,156,19i,328,414,20i,780,220,22i,1004,464,19i,1264,390,19",350,760,"k,4b,166,0,100,760b,238,394,92,40b,114,180,72,46i,114,202,22i,328,414,20",195,120,"x,4k,4i,44,74,39i,92,44,39i,144,74,39b,50,50,96,64x,0",100,800,"z,2k,0n,0,64,100,660,20z,3n,0,0,100,64,20z,1",1360,768,"h,406,92,616,650,10h,700,356,94,134,3h,1228,90,250,442,10h,1216,84,50,90,3h,1212,160,88,176,3h,1224,316,66,132,3h,1220,434,112,72,3r,5,20,0k,1i,1102,492,12r,0h,1176,468,70,64,3h,760,410,76,98,3h,976,82,50,162,3h,960,226,76,122,3h,940,328,106,152,3",1360,768,"e,1070,102,38,46e,974,82,54,74e,1216,84,50,60e,406,92,614,670e,1014,116,222,644e,1230,90,130,670",114,180,"k,4n,0,0,114,188,20k,5n,6,4,104,102,20k,6n,4,8,106,166,20k,4n,10,16,94,160,20",114,180,"k,6n,0,0,114,188,20k,5n,6,4,104,102,20n,4,8,106,166,20k,6n,28,32,60,60,10k,5n,29,33,58,58,10k,4i,58,40,4",550,760,"k,6j,314,0,126,760,6k,4b,408,160,32,12b,318,396,32,8h,394,122,136,46,6m,524,144,22m,524,144,15m,524,144,8h,246,346,132,52,6k,6b,340,96,72,330m,252,372,25m,252,372,17m,252,372,11",550,760,"e,416,122,130,48e,226,346,134,52e,314,0,126,760g,322,170,110,14g,322,370,110,14g,322,570,110,14k,9b,350,432,34,52k,2b,370,466,28,38",195,120,"x,4k,9i,44,74,39i,92,44,39i,144,74,39b,50,50,96,64x,0k,10i,42,76,37i,146,76,37i,92,50,40b,48,72,96,42",195,120,"x,4k,6i,44,74,39i,92,44,39i,144,74,39b,50,50,96,64x,0x,4k,5i,42,74,32i,146,74,32i,92,48,36b,48,72,96,34x,0g,86,8,12,102",195,120,"x,4k,9i,44,74,39i,92,44,39i,144,74,39b,50,50,96,64x,0k,10i,42,76,37i,146,76,37i,92,50,40b,48,72,96,42k,9o,2d,56,40,134,40d,132,40,134,114k,6b,102,42,28,20k,9f,124,84,96,40,132,52k,10i,106,74,20i,92,76,33",195,120,"x,4k,6i,44,74,39i,92,44,39i,144,74,39b,50,50,96,64x,0x,4k,5i,42,74,32i,146,74,32i,92,48,36b,48,72,96,34x,0g,86,8,12,102k,4f,70,40,56,66,86,66b,68,64,6,18",140,140,"k,4n,0,0,114,120,20k,5n,4,4,106,112,20k,6n,4,8,106,108,20k,4n,10,14,94,96,20k,6o,6d,8,62,108,62d,58,10,58,114",140,140,"k,3n,10,14,94,96,20o,6k,5d,8,62,108,62d,58,10,58,114",344,800,"x,4k,14n,4,76,334,614,10x,0h,0,0,344,74,8",344,800,"e,0,72,340,620e,0,0,340,74g,8,232,324,12g,8,482,324,12k,9b,266,510,40,44k,2b,250,540,32,36",588,800,"x,4k,15n,4,76,578,614,10x,0h,0,0,588,74,12",588,800,"e,0,72,586,622e,0,0,588,74g,8,244,570,12g,8,444,570,12g,254,452,12,234k,9b,374,128,36,48k,8b,364,156,36,38k,9b,510,576,30,38",914,80,"h,2,2,912,68,10",50,622,"h,2,2,46,620,6",490,62,"h,2,2,486,60,15",914,80,"h,2,2,912,68,3",140,140,"k,4n,10,14,94,96,20o,6k,16d,8,62,108,62d,58,10,58,114",116,106,"k,6g,16,70,90,22g,16,52,90,22g,16,34,90,22g,16,16,90,22g,2,82,114,22g,2,0,114,22g,96,0,20,104g,0,2,20,104f,20,98,96,6,96,44f,18,70,98,6,22,104o,4k,4d,18,78,100,4d,20,104,96,38k,5b,26,16,18,24",102,42,"h,2,2,100,40,15",590,62,"h,2,2,590,60,3",590,80,"h,2,2,590,68,10",140,140,"k,4n,10,14,94,96,20o,6k,2d,8,62,108,62d,58,10,58,114",42,50,"x,4k,9b,18,4,6,22x,0x,4k,10i,20,26,16k,9x,0i,21,25,15",42,50,"x,4k,12b,18,4,6,22x,0x,4k,12i,20,26,16x,0",42,50,"x,4k,1b,18,4,6,22x,0x,4k,1i,20,26,16x,0",30,30,"k,4f,8,16,22,30,18,0f,12,24,0,8,30,12f,10,10,2,26,18,24k,1f,12,22,4,10,24,14f,10,16,20,26,16,4f,12,10,6,22,16,20",30,30,"k,4f,8,16,22,30,18,0f,12,24,0,8,30,12f,10,10,2,26,18,24k,8f,12,22,4,10,24,14f,10,16,20,26,16,4f,12,10,6,22,16,20",30,30,"k,4f,8,16,22,30,18,0f,12,24,0,8,30,12f,10,10,2,26,18,24k,7f,12,22,4,10,24,14f,10,16,20,26,16,4f,12,10,6,22,16,20",220,235,"k,4f,100,124,98,78,76,116f,100,150,138,156,104,128f,66,140,68,120,32,124k,7f,34,124,82,142,98,120f,96,144,128,152,102,130f,96,124,94,86,78,118x,4k,12i,76,116,15i,96,124,15i,68,146,15i,92,146,15x,0k,11i,92,126,16i,76,120,16i,70,144,16i,90,142,16k,1i,80,126,8i,80,136,8k,7i,100,120,6i,60,146,6",220,235,"k,4f,154,142,74,118,76,148f,108,80,78,126,102,126f,30,144,82,144,74,122f,100,190,104,150,76,142k,7f,100,188,100,146,86,144f,34,142,90,142,86,130f,106,84,90,114,104,118f,140,142,110,130,106,142x,4k,12i,114,122,15i,84,110,15i,68,130,15i,76,154,18i,102,146,18x,0k,11i,84,114,16i,110,124,16i,72,132,16i,76,150,16i,98,146,16k,7i,84,130,9i,96,134,9i,84,140,9i,116,120,5i,80,106,5i,58,130,5",220,235,"k,4f,116,146,80,164,130,234f,140,106,146,144,220,102f,82,80,126,86,122,4f,54,130,76,90,0,52f,70,174,54,142,4,196k,7f,110,150,84,160,126,224f,136,110,142,138,210,104f,90,76,120,80,118,20f,54,120,66,92,4,58f,62,176,54,150,8,192x,4k,12i,44,136,29i,80,96,32i,122,100,32i,128,154,32i,80,168,32x,0k,11i,86,96,32i,116,100,29i,56,134,29i,82,160,29i,120,150,29k,7i,86,120,13i,100,126,13i,84,136,13i,102,104,5i,64,128,5i,58,92,11i,68,78,5i,118,80,13i,130,90,6i,34,140,6",220,235,"x,4k,3i,24,162,11i,62,194,11i,70,70,11i,134,180,17i,146,144,10i,24,120,10i,112,68,10i,124,82,10i,136,110,11i,90,104,7i,94,196,7i,44,94,7x,0",220,235,"x,4k,3i,57,192,8i,151,180,8i,149,100,8i,149,100,4i,19,164,8i,21,108,8i,91,210,4i,41,86,8i,61,56,8i,151,140,6i,99,74,4i,111,54,4i,133,72,4x,0",100,170,"k,4b,25,41,62,96k,6n,31,79,18,24,5n,53,79,22,24,5n,27,51,48,24,5n,29,107,48,24,5k,2f,51,141,93,51,91,145f,61,23,75,103,99,29f,5,39,27,99,75,29f,11,145,25,85,65,157k,4o,4d,67,35,29,97d,65,35,73,99d,31,95,55,141d,55,139,73,93d,55,139,49,155d,51,153,57,167d,65,39,61,15d,61,17,71,7",114,180,"k,4n,10,16,94,160,20k,2f,90,120,110,162,112,94f,96,74,108,118,110,28f,106,60,114,16,76,16f,46,30,114,16,24,14f,6,74,34,10,8,10f,6,124,24,88,6,60f,4,172,20,154,6,60f,44,180,2,174,34,138f,84,180,32,176,56,154f,116,176,70,180,86,146f,112,124,110,180,74,144",72,72,"x,4k,14n,4,4,64,64,5x,0k,5i,36,18,6k,4i,36,16,4",114,180,"k,4n,0,0,114,188,20k,5n,6,4,104,102,20k,6n,4,8,106,166,20k,4n,10,16,94,160,20k,10n,14,20,86,160,20k,9d,26,22,26,188d,46,20,46,188d,66,20,66,188d,86,22,86,188n,76,82,18,34,5k,4i,85,92,6n,81,90,8,20,5",130,170,"x,4k,9n,54,116,4,22,5x,0x,4k,8n,52,138,8,12,5n,42,142,14,8,5x,0k,3o,4d,42,148,60,148k,12d,52,140,60,140k,10d,56,116,56,128x,4k,9n,78,116,4,22,5x,0x,4k,8n,76,138,8,12,5n,80,142,14,8,5x,0k,3o,4d,76,148,94,148k,12d,76,140,84,140k,10d,80,116,80,128x,4k,5i,94,126,5x,0x,4k,9n,90,98,8,22,5x,0x,4k,5i,44,126,5x,0x,4k,9n,40,98,8,22,5x,0x,4k,14n,49,78,40,42,5x,0o,4k,2d,49,94,89,94k,4d,49,114,89,114x,4k,5n,38,32,62,56,10i,34,72,7i,104,72,7x,0o,4k,8d,40,65,100,65x,4f,36,0,64,22,40,36f,22,10,56,20,38,44k,7f,40,6,60,24,44,32f,30,18,56,24,44,40n,32,24,72,36,10a,68,43,34,0,180x,0",130,170,"o,4x,4k,5n,61,84,16,16,5x,0k,4d,54,90,86,90n,44,30,50,48,5k,5n,48,34,42,52,5b,44,64,50,24k,8i,48,74,7i,90,74,7k,4d,58,82,80,82p,76,62,4,8p,60,62,4,8k,14i,76,64,2i,60,64,2",130,170,"x,4k,14n,44,94,40,42,5x,0o,4k,2d,44,110,84,110x,4k,5n,58,96,16,16,5x,0k,4d,44,130,84,130",130,170,"x,4k,5n,38,32,62,56,10i,34,72,7b,86,70,20,6x,0o,4k,4d,68,82,80,82p,80,62,4,8p,90,62,4,8k,8i,54,74,7k,14i,82,64,2i,92,64,2x,4f,36,0,64,22,40,36f,22,10,56,20,38,44f,126,38,102,42,102,22k,7f,40,6,60,24,44,32f,30,18,56,24,44,40f,118,36,92,40,94,26n,30,22,26,40,10a,60,40,20,0,180a,82,40,24,0,180x,0k,8d,60,42,100,42k,4d,56,38,110,38",130,170,"x,4k,5i,66,110,5x,0x,4k,9n,62,82,8,22,5x,0",130,170,"x,4k,9n,62,82,4,22,5x,0x,4k,8n,60,104,8,12,5n,64,108,14,8,5x,0k,3o,4d,60,114,78,114k,12d,60,106,68,106k,10d,64,82,64,94"],i=53,s=12,h=50,e=18,n=16,r=14,f=[s,e,48,h],k=i+44,o=k+80,l=o+80,a=l+10,c=["#000","#fff","#8c8fae","#584563","#3e2137","#d79b7d","#9a6348","#f5edba","#d26471","#c0c741","#647d34","#e4943a","#9d303b","#70377f","#7ec4c1","#34859d","#17434b","#1f0e1c"],d=[{t:[1360,0],i:[[7,100,0,7,500,0,7,900,0,7,1260,0,8,50,590,8,350,590],[2,1112,104],[10,680,0,14,180,-20],[4,1194,494],[3,680,0],[5,1214,716,0,1,16,195,590,0,1,18,390,590,0,0,18,390,590,0,1,12,700,550,1,1],[1,538,703,1]],p:[1030,124,186,370,"#fff",1,30,4,0,200,1,!0,2,4,1100,500,210,210,"#fff",1,30,4,0,200,3,!0,2,4,1100,708,210,4,"#fff",1,50,.1,0,1,3,!1,10,12,1100,476,110,4,"#fff",1,50,.1,0,1,1,!1,10,12,1100,716,300,60,"#fff",1,50,0,1,100,5,!0,2,5]},{t:[2720,0],m:[],i:[[6,670,0,6,2040,0,8,50,590,8,150,590,8,1360,590,8,1200,590,8,2200,590,8,1950,590],[],[24,880,28,9,620,38,22,450,28,22,2500,400],[14,-20,-20,14,1180,-20,14,1660,-15,14,2150,-10],[20,460,550,20,980,550,20,460,300,20,980,300,16,1150,590,16,1400,590,16,1700,590,16,2300,590],[16,250,590,1,1,18,250,590,1,0,12,740,550,2,1,50,2550,550,6,1,16,2700,590,0,1],[0,680,703,1,0,2040,703,1]],p:[],s:[683,580],l:[1,5,0,5,1,0]},{t:[1360,0],m:[0,0,1360,780,4,232,32,870,800,16],i:[[],[],[],[],[30,460,550,30,460,300],[12,740,550,1,1,12,980,245,3,1],[26,680,22,1,27,248,86,1,27,1114,86,1,32,550,472,1,28,846,402,1,31,330,602,1,29,680,703,1]],p:[],s:[683,580]},{t:[1360,0],m:[0,0,1360,780,4,572,32,520,800,2],i:[[],[],[],[],[35,850,550,35,850,250],[12,980,245,2,1,47,690,210,0,1,48,690,200,4,0],[34,848,22,1,27,580,86,1,27,1114,86,1,28,846,402,1,31,672,602,1,31,800,602,1,31,730,502,1,33,848,703,1]],p:[],s:[683,580],l:[0,5,1,5,2,1]},{t:[1950,0],m:[0,0,1960,780,4,572,32,1110,400,2,1440,171,230,150,5],i:[[],[],[],[],[],[48,690,200,3,1,19,1560,191,0,1],[27,580,-225,1,27,1704,-225,1,34,848,22,1,34,1438,22,1,31,872,291,1,31,1e3,291,1,31,1350,291,1,33,848,392,1,33,1438,392,1]],p:[],s:[683,580]}];let x=(t,i,s,h,e,n,r)=>{r&&(t.globalAlpha=r),t.fillStyle=i,t.fillRect(s,h,e,n),t.globalAlpha=1},u=(t,i)=>{x(t,i,0,0,1360,760)},b=(t,i,s,h,e,n,r)=>{n&&(t.font="bold "+n+"px Arial"),r&&(t.textAlign="center"),t.fillStyle=e,t.fillText(i,s,h)},w=(t,i,s,h,e,n,r,f,k,o)=>{t.save(),void 0===e&&(e=i.width),void 0===n&&(n=i.height),void 0===o&&(o=!1),o&&(s-=e/2,h-=n/2),t.translate(s+e/2,h+n/2),t.rotate(2*Math.PI-r*Math.PI/180);let l=0,a=0;l=f?-1:1,k?(a=k,l=k):a=1,t.scale(l,a),t.drawImage(i,-e/2,-n/2,e,n),t.restore()},m=()=>(new Date).getTime(),g=(t,i)=>Math.floor(Math.random()*(i-t+1))+t;const p=t=>.017453292519943295*t,y=t=>JSON.parse(JSON.stringify(t)),T=(t,i)=>t.x<i.x+i.w&&t.x+t.w>i.x&&t.y<i.y+i.h&&t.y+t.h>i.y;class v{constructor(t,i,s,h,e,n,r,f,k,o,l,a,c,d){this.x=t,this.y=i,this.w=s,this.h=h,this.u=e,this.T=n,this.v=[],this.L=m(),this.interval=o,this.max=r,this.A=f,this.I=k,this.level=l,this.O=a,this.D=Math.PI/180*360,this.R=c,this.N=d}update(){for(let t=this.v.length-1;t>=0;t--){let i=this.v[t];i.y+=i.A,i.x+=i.I,this.A>0&&(i.y>=this.y+this.h||i.x>=this.x+this.w)&&(i.P=!0),this.A<0&&i.y<=this.y&&(i.P=!0),this.I>0&&i.x>this.x+this.w&&(i.P=!0)}let t=m();if(t>this.L+this.interval&&this.v.length<this.max){for(let t=0;t<this.T;t++){let t=this.y,i=this.A>0?this.A:0;this.A<0&&(t=this.y+this.h,i=this.A),this.v.push({x:g(this.x,this.x+this.w),y:t,r:g(this.R,this.N),A:i,I:this.I>0?g(this.I,this.I+2):0,a:this.O?1/g(1,5):1})}this.L=t}this.v=this.v.filter(t=>!t.P)}S(t){t.fillStyle=this.u;for(let i=0;i<this.v.length;i++)t.globalAlpha=this.v[i].a,t.beginPath(),t.arc(this.v[i].x,this.v[i].y,this.v[i].r,0,this.D,0),t.fill();t.globalAlpha=1}}class M{constructor(t,i){this.width=t,this.x=i,this.G=-1*(this.width-1360),this.H=!1,this.U=!1}q(t){this.H=!1,this.U=!1,this.x-=1.2*t,this.x<=this.G&&(this.x=this.G,this.H=!0),this.x>=0&&(this.x=0,this.U=!0)}F(t,i){return!!(i<0&&this.U||t>880)||!!(i>0&&this.H||t<480)}}class L{constructor(t,i,s,h,e,n,r,f){this.r=t,this.data=i,this.J=s,this.K=h,this.W=e,this.Y=n,this.done=!1,this.$=r,this.B=f}C(t,i){return!(this.$!==i||this.done||!T(this.r,t)||(this.V(),0))}V(){this.done=!0,this.data[this.J][this.K]=0,this.data[this.W][this.Y]=1,this.B.e=1}}let A,I=0,j=1;const E={},O={crash:[.6],hat:[,,.7,.5,,,.7,,,,.7,,,,,,],ride:[,,,,.6,,,,.6,,,,.6,,,,],snare:[,,,,1,,,1,,,,,.2,.2,1,.2],foot:[1,,,,,,,,.2,,1,1,.2,,,,],wiggle:[,,,,.4,,,,.6,.6,.6,.6,.8,,.8,,],geet:[1,,,,,,,,,,.4,,,,,,]},D={crash:[1],ride:[,,,,.6,,,,.6,,,,.6,,,,],foot:[1,,,,1,,,,1,,,,1,,,,],snare:[,,,,,,,,,,,,.6,.4,.8,.4],mid:[1,,,1,,,1,,,,1,,,,,,],wiggle:[1,,,1,,,1,,,,1,,,,1,,]};let R=-1,N=16;const z=t=>Math.random()<t,P=(t=1)=>2*Math.random()*t-t;let S,G=!1;const H={_:()=>{if(!A)return;S=setTimeout(H._,250);const t=A.currentTime+1;for(;I<t;){++N>16&&(N=1,R++),I+=15/108;const t=~~(R/4)%3==2?D:O;for(const i of Object.keys(t))if(z(t[i][N-1]))if("geet"===i||"mid"===i){let s=55,h=30/j,e=1.2;R%4>2&&(s=41.20344461410875),"mid"===i&&(s*=2,h*=16,e*=3),E.geet(I,e,s,t[i][N-1]/h)}else if("wiggle"===i){let t=440;N%2==0&&(t=391.995436),z(.8)&&(t=523.2511306),E.tt(I,t,5e3,4e3,1*j),z(.6)&&E.tt(I,2*t,5e3,4e3,.5*j)}else E[i](I)}}},U=()=>{if(I)return;A=new(window.AudioContext||window.webkitAudioContext);const t=t=>{const i=A.createBuffer(1,22050,A.sampleRate);buffArray=i.getChannelData(0);for(let i=0;i<22050;i++)buffArray[i]=t(i);return i},i=(()=>t(t=>(Math.PI+50)*t/(Math.PI+50*Math.abs(t))))(),s=(()=>t(P))();E.it=((t=A.currentTime,i,h,e,n)=>{const r=A.createBufferSource(),f=A.createGain(),k=A.createBiquadFilter(),o=n+P(n/2);r.buffer=s,r.loop=!0,r.connect(k),k.connect(f),k.type="bandpass",k.frequency.value=i+P(i/6),k.Q.value=h,f.connect(A.destination),f.gain.setValueAtTime(e/60,t),f.gain.exponentialRampToValueAtTime(1e-14,t+o),r.start(t),r.stop(t+o),setTimeout(()=>{r.disconnect()},1e3+Math.round(1e3*o))}),E.st=((t=A.currentTime,i,s,h=1,e=i,n=1e-4,r="sine")=>{const f=A.createOscillator(),k=A.createGain();f.type=r,f.connect(k),k.connect(A.destination),f.frequency.setValueAtTime(i,t),k.gain.setValueAtTime(h,t),f.frequency.exponentialRampToValueAtTime(e,t+s),k.gain.exponentialRampToValueAtTime(n,t+s),f.start(t),f.stop(t+s),setTimeout(()=>{f.disconnect()},1e3+Math.round(1e3*s))}),E.tt=((t=A.currentTime,s,h,e,n,r=0)=>{const f=A.createBufferSource(),k=A.createGain(),o=A.createBiquadFilter(),l=n+P(n/12);f.buffer=i,f.loop=!0,k.gain.value=0,f.connect(o),o.connect(k),o.type="bandpass",o.frequency.value=s,o.Q.value=h,k.connect(A.destination),k.gain.setValueAtTime(.01,t),k.gain.exponentialRampToValueAtTime(e,t+.05),k.gain.exponentialRampToValueAtTime(.75,t+l),r&&(o.frequency.setValueAtTime(s,t+.01),o.frequency.exponentialRampToValueAtTime(r,t+l/8)),f.start(t),f.stop(t+l),setTimeout(()=>{f.disconnect()},1e3+Math.round(1e3*l))}),E.foot=(t=>{E.st(t,90+P(5),.9,1,10,.001,"sine"),E.st(t,160+P(15),.15,.8,80,.001,"triangle"),E.it(t,1e3,2,.7*j*j,.1)}),E.hat=(t=>{E.it(t,8e3,.8,.5*j*j,.3)}),E.snare=(t=>{E.st(t,200+P(10),.1,.8*j,100,.001,"triangle"),E.it(t,2500,1.5,1.2*j*j,.4)}),E.crash=(t=>{E.it(t,12e3,1,.05*j*j,1.5),E.it(t,6e3,2,.06*j*j,2),E.it(t,500,1,.04*j*j,3)}),E.ride=(t=>{E.it(t,5e3,2,.175*j*j,.7),E.it(t,400,.6,.05*j*j,1)}),E.geet=((t,i,s,h)=>{var e=5e4*h,n=P(.01)+.02;E.tt(t-n,s,5e3,40*e,i),E.tt(t+n,2*s,5e3,30*e,i/1.4),E.tt(t+3*n,3*s,5e3,8*e,i/1.8)})},q=()=>{G||(H._(),G=!0)},F=()=>{G&&(clearTimeout(S),G=!1)},J=()=>{E.st(A.currentTime,110,.8,12,1760,1e-4,"square")},K=()=>{const t=A.currentTime;E.tt(t,55,5e3,1e7,1),E.it(t,110,1,600,2)},W=()=>{E.st(A.currentTime,440,.5,6,220,.001,"triangle"),E.it(A.currentTime,440,1,.15,1)},Y=()=>{E.geet(A.currentTime,4,220,.016),setTimeout(()=>E.geet(A.currentTime,4,261.625565301,.014),100),setTimeout(()=>E.geet(A.currentTime,4,329.627556913,.012),200),setTimeout(()=>E.geet(A.currentTime,4,391.995435982,.01),300)},$=()=>{j=.18},B=()=>{j=.8},C=()=>{E.st(A.currentTime,55,.5,200,110,.001,"sine"),E.it(A.currentTime,500,1,12e3,.8),E.it(A.currentTime,6e3,1,8e3,.2)};class V{constructor(t,i,s,h,e){this.d=y(t),this.origin=0+h,this.ht=[].concat(i),this.et=[],this.nt=[],this.rt=[],this.B=[],this.ft=s,this.s=null,this.kt=!1,this.ot=!1,this.lt=[],this.at=[],this.ct=e,this.dt()}xt(){if(this.ot)return;this.ot=!0;let t=this;setTimeout(()=>{t.ot=!1},60)}dt(){this.kt=!0;for(let t=0;t<this.d.i[6].length;t+=4)if(this.d.i[6][t+3]>0){let i=this.ht[this.d.i[6][t]];this.nt.push({ut:this.d.i[6][t+1]-i.width/2,x:this.d.i[6][t+1]-i.width/2,y:this.d.i[6][t+2]+10,w:i.width,h:i.height-10})}if(!this.ft)for(let t=0;t<this.d.p.length;t+=14)this.rt.push(new v(this.d.p[0+t],this.d.p[1+t],this.d.p[2+t],this.d.p[3+t],this.d.p[4+t],this.d.p[5+t],this.d.p[6+t],this.d.p[7+t],this.d.p[8+t],this.d.p[9+t],this.d.p[10+t],this.d.p[11+t],this.d.p[12+t],this.d.p[13+t]));this.d.s&&(this.s=this.d.s);for(let t=0;t<this.d.i[5].length;t+=5){let i=this.d.i[5];if(this.ft&&this.ct&&(i[t]===e||i[t]===n)){let s=this.ct[this.origin-10].i[5];i[t+4]=i[t]===e?1:s[t+4],i[t]===n&&s[t+4]<1&&(i[t+2]+=200)}if(f.includes(i[t])){if(!this.ft||i[t]!==s&&i[t]!==h||this.d.bt||(this.d.i[5]=this.d.i[5].concat(l-1+i[t+3],i[t+1],i[t+2],0,1)),!this.ft&&i[t]===h)continue;if(this.ft&&i[t]!==e)continue;this.B.push({ut:i[t+1]-this.ht[i[t]].width/2+20,x:i[t+1]-this.ht[i[t]].width/2+20,y:i[t+2],w:this.ht[i[t]].width-40,h:this.ht[i[t]].height,d:i[t+3],l:i[t],N:i[t+1]-this.ht[i[t]].width/2+20+(this.ht[i[t]].width-40)/2,e:i[t+4]})}}if(this.ft){const t=[e,n,r];let i=[],s=5;for(let h=5;h>=2;h--){h<5&&(s=3);let n=this.d.i[h];for(let r=n.length-s;r>=0;r-=s)t.includes(n[r])&&(5===h&&(n[r+4]=0),this.d.bt||(i.push([n[r],n[r+1],n[r+2]]),n[r]!==e&&n.splice(r,s)))}i.sort((t,i)=>t[0]<i[0]),i.forEach(t=>{t.forEach(t=>{this.d.i[1].push(t)})}),this.d.bt=!0}if(this.d.l&&!this.ft){let t=(t,i,s,h)=>({x:t,y:i,w:s[h].width,h:s[h].height});for(let i=0;i<this.d.l.length;i+=6){let s=this.d.l;if(s[i]<2){let h=s[i+1],e=s[i+2],n=5*e+4,r=s[i+3],f=5*s[i+4]+4,k=s[i+5];this.at.push(new L(t(this.d.i[h][5*e+1],this.d.i[h][5*e+2],this.ht,this.d.i[h][5*e]),this.d.i,h,n,r,f,1===s[i],this.B[k]))}}}for(let t=0;t<this.d.i[5].length;t+=5){let i=this.d.i[5];i[t]>l&&i[t]<l+9&&(i[t+4]=this.ft?1:0)}this.viewport=new M(this.d.t[0],this.d.t[1]),this.kt=!1}update(){this.rt.forEach(t=>{t.update()}),this.lt=this.lt.filter(t=>!t.wt());for(let t=0;t<this.lt.length;t++)this.lt[t].update()}gt(t,i,s,h){i&&t.drawImage(i,s-.5*i.width,h,i.width,i.height)}S(t,i){if(this.kt||this.ot)return void u(t,c[4]);if(this.ft&&u(t,c[3]),this.d.m&&this.d.m.length>0){let i=this.d.m;for(let s=0;s<i.length;s+=5)x(t,c[i[s+4]],i[s]+this.viewport.x,i[s+1],i[s+2],i[s+3],1)}let s=3;for(let e=0;e<7;e++){e>4&&(s=4),5===e&&(s=5);let n=this.d.i[e],r=n.length;for(let f=0;f<r;f+=s)if(!(5===e&&n[f+4]<1)){if(this.ft){let i=n[f],s=0;i<2&&(s=0),i>9&&(s=1),i===h&&(s=12-i+1),(i<2||i>9)&&this.gt(t,this.ht[i+s],n[f+1]+this.viewport.x,n[f+2])}else this.gt(t,this.ht[n[f]],n[f+1]+this.viewport.x,n[f+2]);this.rt.filter(t=>t.level===e).forEach(i=>{i.S(t)}),i&&i.pt===e&&i.S(t)}for(let i=0;i<this.lt.length;i++)this.lt[i].S(t);i&&i.yt(t)}}Tt(t,i,s){for(let s=0;s<this.at.length;s++)this.at[s].C(t,i)&&setTimeout(()=>{Y()},300)}}let Q=[],X=null;const Z=t=>Math.PI/180*t,_={k:t=>{X.fillStyle=Q[t[0]],X.strokeStyle=Q[t[0]]},b:t=>{X.fillRect(t[0],t[1],t[2],t[3])},d:t=>{X.beginPath(),X.moveTo(t[0],t[1]),X.lineTo(t[2],t[3]),X.stroke()},f:t=>{X.beginPath(),X.moveTo(t[0],t[1]);for(let i=2;i<t.length;i+=2)X.lineTo(t[i],t[i+1]);X.fill()},i:t=>{tt(t[0],t[1],t[2])},n:t=>{it(t[0],t[1],t[2],t[3],t[4],!0)},o:t=>{X.lineWidth=t[0]},a:t=>{X.beginPath(),X.arc(t[0],t[1],t[2],Z(t[3]),Z(t[4]),!0),X.fill()},e:t=>{X.fillStyle=Q[4],it(t[0],t[1],t[2],t[3],10,!0),X.fillStyle=Q[6],it(t[0]+4,t[1]+4,t[2]-8,t[3]-8,10,!0),X.fillStyle=Q[4],it(t[0]+8,t[1]+8,t[2]-16,t[3]-16,10,!0),X.fillStyle=Q[5],it(t[0]+12,t[1]+12,t[2]-24,t[3]-24,10,!0)},g:t=>{X.fillStyle=Q[4],X.fillRect(t[0],t[1],t[2],t[3]),X.fillStyle=Q[6],X.fillRect(t[0]+4,t[1]+4,t[2]-8,t[3]-8)},h:t=>{X.fillStyle=Q[4],it(t[0],t[1],t[2],t[3],10,!0),X.fillStyle=Q[t[4]-1],it(t[0]+4,t[1]+4,t[2]-8,t[3]-8,10,!0),X.fillStyle=Q[t[4]],it(t[0]+4,t[1]+8,t[2]-8,t[3]-12,10,!0)},j:t=>{X.fillStyle=Q[4],it(t[0],t[1],t[2],t[3],10,!0),X.fillStyle=Q[t[4]-1],it(t[0]+4,t[1]+4,t[2]-8,t[3]-8,10,!0),X.fillStyle=Q[t[4]],it(t[0]+4,t[1]+4,t[2]-12,t[3]-8,10,!0)},m:t=>{X.fillStyle=Q[4],tt(t[0],t[1],t[2]),X.fillStyle=Q[5],tt(t[0],t[1],t[2]-4)},p:t=>{X.beginPath(),X.ellipse(t[0],t[1],t[2],t[3],0,0,Z(360)),X.fill()},z:t=>{X.globalAlpha=1/t[0]}},tt=(t,i,s)=>{X.beginPath(),X.arc(t,i,s,0,Z(360),0),X.fill()},it=(t,i,s,h,e,n)=>{let r=e,f=e,k=e,o=e;X.beginPath(),X.moveTo(t+r,i),X.lineTo(t+s-f,i),X.quadraticCurveTo(t+s,i,t+s,i+f),X.lineTo(t+s,i+h-k),X.quadraticCurveTo(t+s,i+h,t+s-k,i+h),X.lineTo(t+o,i+h),X.quadraticCurveTo(t,i+h,t,i+h-o),X.lineTo(t,i+r),X.quadraticCurveTo(t,i,t+r,i),X.closePath(),n?X.fill():X.stroke()},st=(t,i,s,h)=>{for(let e=0;e<i;e++)ht([].concat(t),!1,0,!0,s*e,h*e)},ht=(t,i,s,h,e,n)=>{for(let r=0;r<t.length;r++){let f=t[r].split(",");const k=f.shift();if("x"===k){if(parseInt(f[0])>0)ht([].concat(t.slice(r+1)),!0,parseInt(f[0]));else if(i)return;continue}if("r"===k){let i=parseInt(f[0]);if(i>0){const s=parseInt(f[1]),h=parseInt(f[2]);let e=0;for(let i=1;i<t.length;i++)if("r"===t[i][0]&&parseInt(t[i][2])<1){e=i;break}e>0&&st(t.slice(r+1,r+1+e),i,s,h)}else if(h)return;continue}let o=f.map(Number);if(i&&s>0)switch(k){case"k":o[0]=4;break;case"n":case"b":case"h":case"j":o[0]-=s,o[1]-=s,o[2]+=2*s,o[3]+=2*s;break;case"a":case"i":case"m":o[2]+=s;break;case"p":o[2]+=s,o[3]+=s}if(h)switch(k){case"n":case"b":case"h":case"j":case"a":case"i":case"m":e&&(o[0]+=e),n&&(o[1]+=n);break;case"d":e&&(o[0]+=e,o[2]+=e),n&&(o[1]+=n,o[3]+=n)}_[k](o)}},et=(t,i)=>{let s=i.split(/([a-z],[\d+,*]+)/).filter(t=>""!==t);s&&((X=t).lineWidth=1,ht(s,!1,0,!1,0,0))},nt=(t,i,s)=>{const h=RegExp(`k,${t}`,"gi");return s.replace(h,`k,${i}`)},rt=(t,i)=>{let s=document.createElement("canvas");return s.width=t,s.height=i,[s.getContext("2d"),s]},ft=()=>{let i=[];(t=>{Q=c})();let s=t;for(let t=0;t<s.length;t+=3){let h=s[t],e=s[t+1],n=s[t+2],[r,f]=rt(h,e);et(r,n),i.push(f)}return kt(i)},kt=t=>{const s=t[i],h=t[i+1],e=t[i+2],n=t[i+3];let r=6.5,f=-65,k=65,o=85,l=-85,a=-1,c=-4,d=.5,x=.25;for(let i=0;i<20;i++){let[u,b]=rt(130,170);w(u,e,87,117+a+c,e.width,e.height,k,!1,!1,!0),w(u,n,75,135+c,n.width,n.height,l,!1,!1,!0),w(u,n,55,135+c,n.width,n.height,o,!1,!1,!0),w(u,s,65,85+a+c,s.width,s.height,0,!1,!1,!0),w(u,h,65,101+a+c,h.width,h.height,0,!1,!1,!0),w(u,e,41,117+a+c,e.width,e.height,f,!1,!1,!0),t.push(b),f+=r,k+=-6.5,o+=-8.5,l+=8.5,a+=x,c+=d,6==i&&(d=-.5,x=-.25)}f=-125,k=65,r=0,o=85,l=-85,a=-1,c=-4,d=.5,x=.25;for(let i=0;i<20;i++){let[u,b]=rt(130,170);w(u,e,87,117+a+c,e.width,e.height,k,!1,!1,!0),w(u,n,75,135+c,n.width,n.height,l,!1,!1,!0),w(u,n,55,135+c,n.width,n.height,o,!1,!1,!0),w(u,s,65,85+a+c,s.width,s.height,0,!1,!1,!0),w(u,h,65,101+a+c,h.width,h.height,0,!1,!1,!0),w(u,e,41,117+a+c,e.width,e.height,f,!1,!1,!0),t.push(b),f+=r,k+=-6.5,o+=-8.5,l+=8.5,a+=x,c+=d,6==i&&(d=-.5,x=-.25)}return ot(t)},ot=t=>{const i=2500,s=2500;for(let h=0;h<80;h++){let[e,n]=rt(i,s);e.fillStyle=c[4],e.fillRect(0,0,i,s),e.globalCompositeOperation="destination-out",e.beginPath(),e.arc(i/2,s/2,20*(h+1),0,p(360),0),e.fill(),e.globalCompositeOperation="source-over",t.push(n)}return lt(t)},lt=i=>{let s=[i[36],i[37],i[38]];const h=[i[39],i[40],i[41]];for(let e=0;e<2;e++){let e=0,n=10,r=.375,f=0;const k=100,o=100;for(let t=0;t<40;t++){let[l,a]=rt(k,o);w(l,s[f],50,50,s[f].width,s[f].height,0,!1,!1,!0);let c=180*Math.random();w(l,h[e],50,n,h[e].width,h[e].height,c,!1,!1,!0),i.push(a),++e>2&&(e=0),n+=r,t>30&&++f>2&&(f=0)}let l=108,a=t[l],c=t[l+1],d=t[l+2];d=nt("9","14",d),d=nt("10","15",d);let[x,u]=rt(a,c);et(x,d),s[0]=u}return at(i)},at=t=>{let i=t[49];for(let s=0;s<10;s++){let[h,e]=rt(100,100);w(h,i,50,50,i.width,i.height,0,!1,!1,!0),b(h,""+s,38,72,c[4],42);let[n,r]=rt(100,100),f=Math.floor(14*Math.random()-7);w(n,e,50,50,n.width,n.height,f,!1,!1,!0),t.push(r)}return ct(t)},ct=i=>{for(let s=0;s<2;s++){let h=3*(45+s),e=t[h],n=t[h+1],r=t[h+2];r=nt("3","14",r);let[f,k]=rt(e,n);et(f,r),i.push(k)}return i};class dt{constructor(){let t=this;this.vt={},this.Mt={Lt:37,At:39,It:38,jt:40,Et:32};for(let t=65;t<91;t++)this.Mt[String.fromCharCode(t)]=t;window.addEventListener("keydown",i=>{t.vt[i.keyCode]=!0}),window.addEventListener("keyup",i=>{t.vt[i.keyCode]=!1})}left(){return this.Ot(this.Mt.Lt)}right(){return this.Ot(this.Mt.At)}Dt(){return this.Ot(this.Mt.Et)}Rt(){return this.Ot(this.Mt.It)}z(){return this.Ot(this.Mt.Z)}x(){return this.Ot(this.Mt.X)}m(){return this.Ot(this.Mt.M)}Ot(t){return!0===this.vt[""+t]}Nt(t){return!1===this.vt[""+t]}zt(){let t=!1;return Object.keys(this.vt).forEach(i=>{this.vt[i]&&(t=!0)}),t}}const xt={Pt:0,St:1,DONE:2};class ut{constructor(t,i,s,h,e,n,r){this.Gt=n,this.Ht=s,this.level=h,this.x=t,this.y=i,this.state=xt.Pt,this.Ut=e,this.w=30,this.h=30,this.qt=0,this.Ft=0,this.L=m(),this.Jt=[],this.$=r;let f=0;r&&(f=40);for(let t=o+f;t<o+40+f;t++)this.Jt.push(t);this.Jt=this.Jt.concat(r?[41,42,43,44,a,a+1]:[41,42,43,44,45,46]),this.frame=0,this.flipX=!1,this.Kt={Rt:!1,Wt:!1,left:!1,right:!1},this.angle=10,this.Yt=1,this.$t=!1,this.visible=!0}S(t){if(!this.visible)return;let i=this.Ut[this.Jt[this.frame]],s=0;this.state!==xt.Pt&&(s=this.level.viewport.x),w(t,i,this.x+s,this.y,i.width,i.height,this.angle,this.flipX,!1,!0)}update(){switch(this.state){case xt.Pt:this.x=this.Gt.x-20,this.Gt.flipX&&(this.x=this.Gt.x+75),this.y=this.Gt.y+40,this.angle=25,this.Gt.flipX&&(this.angle=-25);break;case xt.St:this.x+=this.qt,this.y+=this.Ft,!this.flipX&&this.qt>=.3&&(this.qt-=.3),this.flipX&&this.qt<=-.3&&(this.qt+=.3),this.Ft>=.6&&(this.Ft+=.6),this.Ft<=.6&&(this.Ft+=.6),this.qt>0&&this.qt<=.2&&(this.qt=0),this.qt<0&&this.qt>=-.2&&(this.qt=0),this.Ft>0&&this.Ft<=.3&&(this.Ft=0),this.Ft<0&&this.Ft>=-.3&&(this.Ft=0),this.move(this,this.qt,this.Ft,this.level.nt),this.Kt.Wt&&(this.Yt<1?(this.Ft=0,this.qt=0,this.$t=!0):(this.Ft=-4.5,this.qt=4,this.flipX&&(this.qt*=-1),this.Yt-=1)),!this.Kt.Wt&&(this.Ft<.1||this.Ft>-.1)&&(this.Ft+=.1)}let t=m();t>this.L+50&&(this.frame<this.Jt.length-1?(this.frame+=1,this.frame===this.Jt.length-6&&(this.y-=30,this.Ft=-6,this.$?this.Gt.Bt():this.Gt.Ct()),this.frame===this.Jt.length-3&&this.level.Tt({x:this.x-60,y:this.y-60,w:120,h:120},this.$,this.Ht)):this.visible=!1,this.L=t)}Vt(t,i,s){return{x:t.x+i,y:t.y+s,w:t.w,h:t.h}}move(t,i,s,h){this.Kt={Rt:!1,Wt:!1,left:!1,right:!1};for(let s=0;s<h.length;s++){let e=this.Vt(t,i,0);h[s].x=Math.floor(h[s].ut),this.Qt(e,h[s])&&(i<0?(i=h[s].x+h[s].w-t.x,this.Kt.left=!0):i>0&&(i=h[s].x-t.x-t.w,this.Kt.right=!0))}i>10&&(i=10),i<-10&&(i=-10),this.qt=i,t.x+=i;for(let i=0;i<h.length;i++){let e=this.Vt(t,0,s);this.Qt(e,h[i])&&(s<0?(s=h[i].y+h[i].h-t.y,this.Kt.Rt=!0):s>0&&(s=h[i].y-t.y-t.h,this.Kt.Wt=!0))}s>10&&(s=10),s<-10&&(s=-10),this.Ft=s,t.y+=s}Qt(t,i){return t.x<i.x+i.w&&t.x+t.w>i.x&&t.y<i.y+i.h&&t.y+t.h>i.y}Xt(){this.x=this.Gt.x-this.level.viewport.x,this.Ft-=10.5,this.qt=7,this.angle=25,this.Gt.flipX&&(this.flipX=!0,this.qt*=-1,this.angle*=-1),this.qt+=this.Gt.qt,this.Ft+=this.Gt.Ft,this.state=xt.St}wt(){return this.state===xt.DONE}}class bt{constructor(t,s,h){this.x=0,this.y=0,this.pt=6,this.qt=0,this.Ft=1,this.Zt=!1,this._t=!0,this.ht=t,this.level=s,this.Ht=h,this.ti=!1,this.ii=!1,this.frame=0,this.si=!1;let e=m();this.L=e,this.hi=e,this.ei=e,this.ni=e,this.ri=e,this.ft=!1,this.fi=!1,this.w=45,this.h=130,s.s&&(this.x=s.s[0],this.y=s.s[1]),this.flipX=!1,this.animation=[];let n=i+4;for(let t=n;t<n-1+20;t++)this.animation.push(t);for(let t=n-1+20;t>=n;t--)this.animation.push(t);this.Kt={Rt:!1,Wt:!1},this.ki=null,this.oi=!1,this.li=[o,o+40,l,l+1],this.selected=0,this.ai=!0}ci(){this.qt<6&&(this.qt+=1.5),this.flipX=!1}di(){this.qt>-6&&(this.qt-=1.5),this.flipX=!0}Dt(){this.Ft>-10&&!this.Zt?this.Ft-=3.5:(this.Zt=!0,J())}Vt(t,i,s){return{x:t.x+i,y:t.y+s,w:t.w,h:t.h}}move(t,i,s,h){for(let s=0;s<h.length;s++){let e=this.Vt(t,i,0);h[s].x=h[s].ut+this.level.viewport.x,this.Qt(e,h[s])&&(i<0?i=h[s].x+h[s].w-t.x:i>0&&(i=h[s].x-t.x-t.w))}this.qt=i,this.level.viewport.q(i),this.level.viewport.F(t.x,i)&&(t.x+=i),this.Kt={Rt:!1,Wt:!1};for(let i=0;i<h.length;i++){let e=this.Vt(t,0,s);this.Qt(e,h[i])&&(s<0?(s=h[i].y+h[i].h-t.y,this.Kt.Rt=!0):s>0&&(s=h[i].y-t.y-t.h,this.Kt.Wt=!0))}this.Ft=s,t.y+=s}xi(){if(m()<this.L+400||this.ii)return;let t=this.Vt(this,0,0),i=this.level.B;for(let s=0;s<i.length;s++)if(i[s].x=i[s].ut+this.level.viewport.x,this.Qt(t,i[s])&&i[s].e>0){this.x=i[s].N-26+this.level.viewport.x,this.qt=0,this.L=m();let t=this;i[s].l>14&&i[s].l<46?(this.ii=!0,this.Ft=-15,this.Zt=!0,this.frame=9,J(),t.level.ft?B():$(),setTimeout(()=>{t.pt=2,t.level.ft&&(t.pt=0),setTimeout(()=>{t.Ht.ui(i[s].d,!0,!1),t.ii=!1},450)},450)):(this.ft=!0,this.Ht.ui(i[s].d,!1,!0));break}}update(t){if(this.si)return;let i=!1;if(!this.ii){if(t.left()?(i=!0,this.di()):t.right()&&(i=!0,this.ci()),!t.Dt()||this.Zt||this._t||(i=!0,this.Dt()),t.Rt()&&!i&&this.xi(),t.z()){let t=m();t>this.ei+300&&(this.ei=t,this.selected<2&&(this.oi?(W(),this.ki.Xt(),this.oi=!1):(this.ki=new ut(this.x,this.y,this.Ht,this.level,this.ht,this,1===this.selected),this.oi=!0,this.level.lt.push(this.ki))))}if(t.x()){let t=m();t>this.ni+300&&(this.ni=t,this.selected<2&&this.oi&&(W(),this.ki.Xt(),this.oi=!1),this.selected+=1,this.selected>this.li.length-1&&(this.selected=0))}if(t.m()){let t=m();t>this.ri+300&&(this.ai?F():(q(),B()),this.ai=!this.ai,this.ri=t)}}this.qt>0&&(this.qt-=.1),this.qt<0&&(this.qt+=.1),this.Ft>0&&(this.Ft+=.6),this.Ft<0&&(this.Ft+=.6),i||(this.qt>0&&this.qt<.2&&(this.qt=0),this.qt<0&&this.qt>-.2&&(this.qt=0));let s=this.y+this.Ft;this.move(this,this.qt,this.Ft,this.level.nt),this.ti=s>this.y&&!this.Kt.Rt,this.ti&&(this.Zt=!1,this._t=!1),s===this.y||this.Kt.Rt||(this.Ft=0),this.Ft>.5&&(this._t=!0),!this.Zt||this.Kt.Rt||this.Kt.Wt||this.ti||this.Ft>-.1&&this.Ft<.1&&(this.Ft=3.5,this._t=!0),this.x<0&&(this.x=0,this.qt<0&&(this.qt=0)),this.x-this.level.viewport.x>this.level.viewport.width-this.w&&(this.x=this.level.viewport.width-this.w+this.level.viewport.x,this.qt>0&&(this.qt=0)),this.ti&&(this.Ft<.1||this.Ft>-.1)&&(this.Ft+=.1)}gt(t,s){let h=this.animation[s],e=44;(this.ft||this.fi)&&(h=i-2,e=58);let n=0;this.oi&&(n=20);let r=this.ht[h+n];w(t,r,this.x+26,this.y+e,r.width,r.height,0,this.flipX,!1,!0),this.fi&&w(t,this.ht[i-1],this.x+26,this.y+e,r.width,r.height,0,this.flipX,!1,!0)}S(t){if(!this.si)if(this.gt(t,this.frame),!this.Zt&&(this.qt>.1||this.qt<-.1)){let t=m();t>this.hi+10&&(this.frame++,this.frame>this.animation.length-1&&(this.frame=0),this.hi=t)}else this.Zt||(this.frame=10),this.Zt&&(this.frame=18)}Qt(t,i){return t.x<i.x+i.w&&t.x+t.w>i.x&&t.y<i.y+i.h&&t.y+t.h>i.y}bi(){this.ii=!1,this.ft=!1,this.fi=!1}Ct(){K()}Bt(){C()}yt(t){t.strokeStyle=c[1],t.lineWidth=4;let i=680-90*this.selected;t.globalAlpha=.2;let s=0;for(let h=0;h<this.li.length;h++){this.selected===h&&(t.globalAlpha=1,t.strokeRect(i+10+90*h,30,80,80));let e=this.ht[this.li[h]];h>0&&(s=-5),w(t,e,i+90*h,35+s,e.width,e.height,0,!1,!1,!1),t.globalAlpha=.2,s=0}t.globalAlpha=1}}const wt={LOADING:0,wi:1,mi:2,gi:3,pi:4};let mt=[];class gt{constructor(){this.state=wt.LOADING,this.Gt=null,this.yi=new dt,this.Ti=!1,this.vi=m(),this.Mi=k,this.Li=1,this.Ai=-1,this.Ii=0,this.ji=0,this.data=y(d);let t=this.data.length;for(let t=0;t<10;t++)this.data.push({});for(let i=0;i<t;i++)this.data[i+10]=this.data[i]}start(){let t=this;setTimeout(()=>{mt=ft(),t.level=new V(this.data[0],mt,!1,0),t.state=wt.wi},25)}update(){switch(this.state){case wt.wi:this.level.update(),this.Ei(wt.mi,1);break;case wt.mi:this.Gt=new bt(mt,this.level,this),this.state=wt.gi,this.Ti=!0,this.Ii=this.Gt.x+40,this.ji=this.Gt.y+30;break;case wt.gi:this.level.update(),this.Gt.update(this.yi)}if(this.Ti){let t=m();t>this.vi+15&&(this.Mi+=this.Li,this.vi=t,this.Mi<k+1&&this.Ai>-1&&this.level.xt(),this.Mi<k&&this.Ai>-1&&(this.level.xt(),this.Oi()),this.Mi>k+30&&this.Li>0&&this.Gt.bi(),this.Mi>k+79&&(this.Ti=!1,this.Li*=-1))}}S(t){switch(this.state){case wt.LOADING:u(t,"#3e2137"),b(t,"Loading",583,384,"#f5edba",32);break;case wt.wi:this.level.S(t),x(t,"#000",536,136,390,300,.4),b(t,"Behind the Scenery",583,214,"#f5edba",32),b(t,"by madmarcel for js13k 2019",623,244,"#f5edba",16),b(t,"music and sfx by justinfunstain",623,274,"#f5edba",16),b(t,"press any key to start",623,384,"#f5edba",28);break;case wt.gi:this.level.S(t,this.Gt)}if(this.Ti){this.Gt.ii=!0;let i=mt[this.Mi];w(t,i,this.Ii,this.ji,i.width,i.height,0,!1,!1,!0)}}Ei(t,i){this.yi.zt()&&(this.state=t,this.level=new V(this.data[i],mt,!1,i),U(),q(),B())}ui(t,i,s){this.level.ft&&(i=!1),s?(this.Ii=this.Gt.x+40,this.ji=this.Gt.y+30,this.Gt.ii=!0,this.Gt.ft=!0,this.Gt.fi=!1,this.Ai=t,this.Ti=!0,this.Mi=k+50,this.Li=-1):(i&&(t+=10),this.data[this.level.origin]=y(this.level.d),this.level=new V(this.data[t],mt,i,t,this.data),this.Gt.level=this.level,this.Gt.pt=6,this.Ai=-1)}Oi(){this.data[this.level.origin]=y(this.level.d),this.level=new V(this.data[this.Ai],mt,!1,this.Ai),this.level.xt(),this.Gt.ft=!1,this.Gt.fi=!0,this.Gt.level=this.level,this.Gt.pt=6,this.Ti=!0,this.Mi=k,this.Li=1,this.Ii=this.Gt.x+40,this.ji=this.Gt.y+30}}window.addEventListener("load",()=>{const t=document.getElementById("c").getContext("2d"),i=new gt;let s=()=>{i.update(),t.clearRect(0,0,1360,760),i.S(t),requestAnimationFrame(s)};i.start(),s()})}();</script>